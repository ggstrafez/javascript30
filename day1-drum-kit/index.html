<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>#JavaScript30, Day 1: Drum Kit<</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

    <div class="container">

        <div class="task">
            <h1 class="task__title">#JavaScript30, Day 1: Drum Kit</h1>
            <p class="task__details">In this JavaScript30 challenge the task was to make a drum kit that plays sounds when a specific key is pressed. Additionally, the browser elements that represent the pressed key should clearly show an active state that resets after the transition has ended.</p>
        </div>

        <div class="drum">
            <div class="drum-key" data-key="65">
                <p class="drum-key__title-key">A</p>
                <p class="drum-key__sound">Clap</p>
            </div>
            <div class="drum-key" data-key="83">
                <p class="drum-key__title-key">S</p>
                <p class="drum-key__sound">Hi-Hat</p>
            </div>
            <div class="drum-key" data-key="68">
                <p class="drum-key__title-key">D</p>
                <p class="drum-key__sound">Kick</p>
            </div>
            <div class="drum-key" data-key="70">
                <p class="drum-key__title-key">F</p>
                <p class="drum-key__sound">Open Hat</p>
            </div>
            <div class="drum-key" data-key="71">
                <p class="drum-key__title-key">G</p>
                <p class="drum-key__sound">Boom</p>
            </div>
            <div class="drum-key" data-key="72">
                <p class="drum-key__title-key">H</p>
                <p class="drum-key__sound">Ride</p>
            </div>
            <div class="drum-key" data-key="74">
                <p class="drum-key__title-key">J</p>
                <p class="drum-key__sound">Snare</p>
            </div>
            <div class="drum-key" data-key="75">
                <p class="drum-key__title-key">K</p>
                <p class="drum-key__sound">Tom</p>
            </div>
            <div class="drum-key" data-key="76">
                <p class="drum-key__title-key">L</p>
                <p class="drum-key__sound">Tink</p>
            </div>
        </div>

        <div class="links">
            <a href="https://javascript30.com" target="_blank" class="links__btn links__btn--j30">#JavaScript30</a>
            <a href="https://twitter.com/ggstrafez" target="_blank" class="links__btn links__btn--twitter">Twitter</a>
            <a href="mailto:ggstrafez@gmail.com" target="_blank" class="links__btn links__btn--gmail links__btn--last">Email</a>
        </div>

    </div>

    <!-- Drum Sounds -->
    <audio data-key="65" src="drum-sounds/clap.wav"></audio>
    <audio data-key="83" src="drum-sounds/hihat.wav"></audio>
    <audio data-key="68" src="drum-sounds/kick.wav"></audio>
    <audio data-key="70" src="drum-sounds/openhat.wav"></audio>
    <audio data-key="71" src="drum-sounds/boom.wav"></audio>
    <audio data-key="72" src="drum-sounds/ride.wav"></audio>
    <audio data-key="74" src="drum-sounds/snare.wav"></audio>
    <audio data-key="75" src="drum-sounds/tom.wav"></audio>
    <audio data-key="76" src="drum-sounds/tink.wav"></audio>

    <script type="text/javascript">
        function playSound(e) {
            const keyAudio = document.querySelector(`audio[data-key="${e.keyCode}"]`); 
            const keyPress = document.querySelector(`.drum-key[data-key="${e.keyCode}"]`); // Use `${}` to check if the pressed key keyCode matches with audio[data-key]
            if (!keyAudio) return; // Stops function running
            keyAudio.currentTime = 0; // Restart audio
            keyAudio.play(); // Play audio
            keyPress.classList.add("drum-key--playing"); // Add playing class
        };

        // Remove playing class
        function removeTransition(e) {
            if (e.propertyName !== 'transform') return; // Skip if it's not a transform
            this.classList.remove("drum-key--playing"); // this is equal to keyPlaying variable
        };
        const keyPlaying = document.querySelectorAll('.drum-key');
        keyPlaying.forEach(keyPlaying => keyPlaying.addEventListener('transitionend', removeTransition)); // transitionend not transitioned

        window.addEventListener('keydown', playSound);
    </script>

</body>
</html>